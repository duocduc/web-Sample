<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>商品の編集</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <div class="sign">
      <div class="container">
        <h1><a href="/list">教科書販売</a></h1>
        <div class="panel">
          <h2>商品の編集</h2>
          <% if (errors.length > 0) { %>
          <ul class="errors">
            <% errors.forEach(error => { %>
            <li><%= error %></li>
            <% }); %>
          </ul>
          <% } %>
          <form
            action="/edit-product/<%= product.id %>"
            method="post"
            enctype="multipart/form-data"
          >
            <p>商品名</p>
            <input
              type="text"
              name="title"
              value="<%= product.title %>"
              required
            />
            <p>商品説明</p>
            <textarea name="describe" required>
<%= product.describe %></textarea
            >
            <p>価格</p>
            <input
              type="number"
              name="price"
              value="<%= product.price %>"
              required
            />
            <input
              type="hidden"
              name="seller_id"
              value="<%= product.seller_id %>"
            />
            <p>現在の画像</p>
            <% if (product.image_path) { %> <%
            product.image_path.split(';').forEach((image) => { %>
            <img src="<%= image %>" alt="商品画像" width="100" />
            <% }); %> <% } else { %>
            <p>画像がありません。</p>
            <% } %>
            <p>新しい画像をアップロード (最大3枚)</p>
            <input type="file" name="images" accept="image/*" multiple />
            <input type="submit" value="商品を更新する" />
            <a href="/account/<%= locals.userId %>">マイアカウントページに戻る</a>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
