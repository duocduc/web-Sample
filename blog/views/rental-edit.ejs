<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>貸出本の編集</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <div class="sign">
      <div class="container">
        <h1><a href="/list">貸出管理</a></h1>
        <div class="panel">
          <h2>貸出本の編集</h2>
          <% if (errors.length > 0) { %>
          <ul class="errors">
            <% errors.forEach((error) => { %>
            <li><%= error %></li>
            <% }); %>
          </ul>
          <% } %>
          <form
            action="/rental-edit/<%= rental.id %>"
            method="post"
            enctype="multipart/form-data"
          >
            <p>タイトル</p>
            <input
              type="text"
              name="title"
              value="<%= rental.title %>"
              required
            />
            <p>説明</p>
            <textarea name="describe" required><%= rental.describe %></textarea>
            <p>現在の画像</p>
            <% if (rental.image_path) { %> <%
            rental.image_path.split(";").forEach((image) => { %>
            <img src="<%= image %>" alt="貸出本画像" width="100" />
            <% }); %> <% } else { %>
            <p>画像がありません。</p>
            <% } %>
            <p>新しい画像をアップロード (最大3枚)</p>
            <input type="file" name="images" accept="image/*" multiple />
            <input type="submit" value="貸出本を更新する" />
            <a href="/account/<%= locals.userId %>"
              >マイアカウントページに戻る</a
            >
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
